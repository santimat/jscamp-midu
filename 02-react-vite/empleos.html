<!doctype html>
<html lang="es">
  <head>
    <title>DevJobs - Empleos</title>
    <meta charset="UTF-8" />
    <meta
      name="description"
      content="Listado con empleos y filtros para encontrar el trabajo de tus sueños."
    />

    <link rel="stylesheet" href="./css/styles.css" />
    <link rel="stylesheet" href="./css/avatar.css" />

    <!-- we can write .jsx syntax and convert it with babel  -->
    <script type="module">
      import React from "https://esm.sh/react?dev";
      import ReactDOM from "https://esm.sh/react-dom/client?dev";

      // add react to global object window for this example, that is not the normal way to work with react
      window.React = React;
      window.ReactDOM = ReactDOM;
    </script>
    <script
      type="module"
      src="https://unpkg.com/@babel/standalone/babel.min.js"
    ></script>

    <!-- creating a jobCard with react -->
    <script type="text/babel">
      function JobCard({ job }) {
        const { id, title, company, location, description } = job;

        const [isApplied, setIsApplied] = React.useState(false);

        // function for handle the event
        function handleEvent() {
          // change state's value each the apply button is clicked
          setIsApplied(!isApplied);
          alert(`You have applied to the job: ${title}`);
        }

        // add classes and text dynamically
        const btnClass = `button-apply-job ${isApplied ? "is-applied" : ""}`;
        const btnText = isApplied ? "Applied" : "Apply";

        return (
          <article className="job-listing-card">
            <div>
              <h3>
                <a href={`./empleos.html?j=${id}`}>{title}</a>
              </h3>
              <small>
                {company} - {location}
              </small>
              <p>{description}</p>
            </div>

            <button onClick={handleEvent} className={btnClass}>
              {btnText}
            </button>
          </article>
        );
      }

      const jobs = [
        {
          id: "7a4d1d8b-1e45-4d8c-9f1a-8c2f9a9121a4",
          title: "Desarrollador de Software Senior",
          company: "Tech Solutions Inc.",
          location: "Remoto",
          description:
            "Buscamos un ingeniero de software con experiencia en desarrollo web y conocimientos en JavaScript, React y Node.js. El candidato ideal debe ser capaz de trabajar en equipo y tener buenas habilidades de comunicación.",
        },
        {
          id: "8b5e2e9c-2f56-5e9d-0g2b-9d3g0b0a32b5",
          title: "Desarrollador Frontend React",
          company: "Creative Digital Agency",
          location: "Madrid, España",
          description:
            "Buscamos un desarrollador frontend especializado en React para unirse a nuestro equipo. Experiencia con TypeScript, CSS-in-JS y testing es valorada. Ambiente colaborativo y proyectos innovadores.",
        },
      ];

      function App() {
        return (
          <div className="jobs-listings">
            {jobs.map((job) => (
              // react requires that we put a key for each element, to differentiate each one
              <JobCard key={job.id} job={job} />
            ))}
          </div>
        );
      }

      const rootEl = document.querySelector("#react-root");
      const root = ReactDOM.createRoot(rootEl);
      root.render(<App />);
    </script>
  </head>

  <body>
    <header>
      <h1>
        <a href="/">
          <svg
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <polyline points="16 18 22 12 16 6"></polyline>
            <polyline points="8 6 2 12 8 18"></polyline>
          </svg>
        </a>
        DevJobs
      </h1>

      <nav>
        <!-- <a href="">
        Inicio
      </a> -->
        <a href="">Empleos</a>
      </nav>

      <div>
        <devjobs-avatar
          service="x"
          username="_santinomaturo"
          size="42"
        ></devjobs-avatar>
      </div>
    </header>

    <main>
      <section class="jobs-search">
        <h1>First steps with react</h1>
      </section>

      <section>
        <h2>Empleos disponibles</h2>
        <div id="react-root"></div>
      </section>
    </main>

    <footer>
      <small>&copy; 2025 DevJobs. Todos los derechos reservados.</small>
    </footer>
  </body>
</html>
